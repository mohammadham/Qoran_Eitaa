# ูพุฑูฺู ุฑุจุงุช ูุฏุฑุช ูุญุชูุง ุจุฑุง ุงุชุง - ูุณุชูุฏุงุช ูู

## ๐ ูุนุฑู ูพุฑูฺู
ุฑุจุงุช ูุฏุฑุช ูุญุชูุง ฺฉ ุณุณุชู ูพุดุฑูุชู ุจุฑุง ูุฏุฑุช ู ุฏุณุชูโุจูุฏ ูุญุชูุง ุฏุฑ ูพุงูโุฑุณุงู ุงุชุง ุงุณุช ฺฉู ุจุฑ ุฑู Cloudflare Workers ุงุฌุฑุง ูโุดูุฏ. ุงู ุฑุจุงุช ุจุง ูุนูุงุฑ ฺฉุงููพูููุช ูุญูุฑ ุทุฑุงุญ ุดุฏู ู ุงูฺฉุงู ูุฏุฑุช ุขุณุงู ูุญุชูุง ุฑุง ุจุฑุง ุงุฏููโูุง ูุฑุงูู ูโฺฉูุฏ.

## ๐๏ธ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
eitaa-content-bot/
โโโ src/
โ   โโโ components/
โ   โ   โโโ admin/
โ   โ   โ   โโโ handlers/
โ   โ   โ   โ   โโโ categoryManager.js
โ   โ   โ   โ   โโโ fileUploader.js
โ   โ   โ   โ   โโโ groupManager.js
โ   โ   โ   โ   โโโ welcomeMessage.js
โ   โ   โ   โโโ keyboards/
โ   โ   โ   โ   โโโ adminKeyboards.js
โ   โ   โ   โโโ middleware/
โ   โ   โ       โโโ adminAuth.js
โ   โ   โโโ user/
โ   โ   โ   โโโ handlers/
โ   โ   โ   โ   โโโ navigation.js
โ   โ   โ   โ   โโโ search.js
โ   โ   โ   โโโ keyboards/
โ   โ   โ   โ   โโโ userKeyboards.js
โ   โ   โ   โโโ middleware/
โ   โ   โ       โโโ userAuth.js
โ   โ   โโโ shared/
โ   โ   โ   โโโ database/
โ   โ   โ   โ   โโโ schema.js
โ   โ   โ   โ   โโโ operations.js
โ   โ   โ   โ   โโโ migrations.js
โ   โ   โ   โโโ utils/
โ   โ   โ   โ   โโโ messageHandler.js
โ   โ   โ   โ   โโโ fileHandler.js
โ   โ   โ   โ   โโโ constants.js
โ   โ   โ   โโโ api/
โ   โ   โ       โโโ eitaaApi.js
โ   โโโ config/
โ   โ   โโโ config.js
โ   โโโ index.js
โ   โโโ package.json
โโโ docs/
โ   โโโ API.md
โโโ README.md
โโโ wrangler.toml
```

## ๐๏ธ ุณุงุฎุชุงุฑ ุฏุชุงุจุณ (Cloudflare KV)

### 1. Namespace: `EITAA_BOT_DATA`

#### Key: `categories`
```javascript
{
  "category_id": {
    "id": "category_id",
    "parent": "parent_category_id or -1",
    "title": "ุนููุงู ุฏุณุชู",
    "description": "ุชูุถุญุงุช ุฏุณุชู",
    "children": ["child_id_1", "child_id_2"],
    "attachments": ["file_id_1", "file_id_2"],
    "type": "admin/user",
    "createdAt": "timestamp",
    "updatedAt": "timestamp"
  }
}
```

#### Key: `files`
```javascript
{
  "file_id": {
    "id": "file_id",
    "name": "ูุงู ูุงู",
    "type": "photo/video/document/audio",
    "eitaaMessageId": "message_id_in_channel",
    "categoryId": "category_id",
    "fileSize": 1024,
    "mimeType": "application/pdf",
    "createdAt": "timestamp"
  }
}
```

#### Key: `welcome_messages`
```javascript
{
  "chosen": "0",
  "list": [
    {
      "id": "msg_id",
      "name": "ูุงู ูพุงู",
      "description": "ุชูุถุญุงุช ูพุงู",
      "text": "ูุชู ูพุงู ุฎูุดุงูุฏฺฏู",
      "isActive": true
    }
  ]
}
```

#### Key: `admin_activities`
```javascript
{
  "admin_user_id": {
    "admin_action_wait": true,
    "admin_action_type": "send_messages_or_file_to_a_group|send_text_for_a_input",
    "action_temp_file_array": ["msg_id_1", "msg_id_2"],
    "action_input_id": "category_id|input_send_name|input_send_description",
    "state": "waiting_name|waiting_description|waiting_files|completed",
    "tempData": {} // ุฐุฎุฑู ุฏุงุฏูโูุง ูููุช
  }
}
```

#### Key: `groups`
```javascript
{
  "groups": [
    {
      "id": "group_id",
      "title": "ูุงู ฺฏุฑูู/ฺฉุงูุงู",
      "type": "group|channel",
      "joinedAt": "timestamp",
      "status": "active|left"
    }
  ]
}
```

#### Key: `users`
```javascript
{
  "user_id": {
    "id": "user_id",
    "type": "admin|user",
    "username": "username",
    "firstName": "ูุงู",
    "lastName": "ูุงู ุฎุงููุงุฏฺฏ",
    "createdAt": "timestamp",
    "lastSeen": "timestamp",
    "currentMenu": "menu_path"
  }
}
```

## ๐ง ูุญูู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- Node.js v16 ุง ุจุงูุงุชุฑ
- ุญุณุงุจ Cloudflare
- wrangler CLI

### ูุฑุงุญู ูุตุจ

1. **ฺฉููู ูพุฑูฺู**
```bash
git clone [repository-url]
cd eitaa-content-bot
```

2. **ูุตุจ ูุงุจุณุชฺฏโูุง**
```bash
npm install
```

3. **ุชูุธู ูุชุบุฑูุง ูุญุท**
```bash
# wrangler.toml
name = "eitaa-content-bot"
main = "src/index.js"
compatibility_date = "2024-01-01"

[vars]
BOT_TOKEN = "YOUR_BOT_TOKEN"
ADMIN_USER_IDS = "123456789,987654321"
CHANNEL_ID = "@your_channel_id"

[[kv_namespaces]]
binding = "EITAA_BOT_DATA"
id = "your_kv_namespace_id"
preview_id = "your_preview_kv_namespace_id"
```

4. **ุงุณุชูุฑุงุฑ ุฏุฑ Cloudflare Workers**
```bash
wrangler login
wrangler deploy
```

## ๐ฏ ุฑุงูููุง ุงุณุชูุงุฏู

### ุจุฑุง ุงุฏููโูุง

#### ุงูุฒูุฏู ุฏุณุชู ุฌุฏุฏ
1. ุงุฒ ููู ุงุตู "ุงูุฒูุฏู ุฏุณุชู ุฌุฏุฏ" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
2. ูุงู ุฏุณุชู ุฑุง ูุงุฑุฏ ฺฉูุฏ
3. ุชูุถุญุงุช ุฏุณุชู ุฑุง ูุงุฑุฏ ฺฉูุฏ
4. ููุน ุฏุณุชู (ุงุฏูู/ฺฉุงุฑุจุฑ) ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
5. ุฏุณุชู ูุงูุฏ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ (ุจุฑุง ุฏุณุชู ุงุตูุ ุจุฏูู ุงูุชุฎุงุจ ูุงูุฏ)
6. ุชุงุฏ ููุง

#### ูุฏุฑุช ูุงูโูุง
1. ุงุฒ ููู ุงุตู "ูุณุช ุฏุณุชูโูุง" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
2. ุฏุณุชู ููุฑุฏ ูุธุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. "ุงูุฒูุฏู ูุงู" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
4. ูุงูโูุง ููุฑุฏ ูุธุฑ ุฑุง ุงุฑุณุงู ฺฉูุฏ
5. ุฏฺฉูู "ุงุชูุงู ุงุฑุณุงู" ุฑุง ูุดุงุฑ ุฏูุฏ

#### ูุฏุฑุช ฺฏุฑููโูุง
1. ุงุฒ ููู ุงุตู "ูุณุช ฺฏุฑููโูุง" ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
2. ูุณุช ฺฏุฑููโูุง ู ฺฉุงูุงูโูุง ููุงุด ุฏุงุฏู ูโุดูุฏ
3. ุจุฑุง ุฎุฑูุฌ ุงุฒ ฺฏุฑููุ ุฏฺฉูู "ุฎุฑูุฌ" ุฑุง ูุดุงุฑ ุฏูุฏ

### ุจุฑุง ฺฉุงุฑุจุฑุงู

#### ุฌุณุชุฌู
1. ุฏุฑ ููู ุงุตู ุฏฺฉูู "ุฌุณุชุฌู" ุฑุง ูุดุงุฑ ุฏูุฏ
2. ุนุจุงุฑุช ููุฑุฏ ูุธุฑ ุฑุง ุชุงูพ ฺฉูุฏ
3. ูุชุงุฌ ุฌุณุชุฌู ููุงุด ุฏุงุฏู ูโุดูุฏ

#### ูุฑูุฑ ุฏุณุชูโูุง
1. ุงุฒ ููู ุงุตู ุฏุณุชูโูุง ุงุตู ููุงุด ุฏุงุฏู ูโุดูุฏ
2. ุจุฑุง ูุฑูุฏ ุจู ุฒุฑุฏุณุชูุ ุฑู ุฏุณุชู ฺฉูฺฉ ฺฉูุฏ
3. ุจุฑุง ุจุงุฒฺฏุดุช ุงุฒ ุฏฺฉูู "ุจุงุฒฺฏุดุช" ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ TODO LIST

### ูุงุฒ 1 - ุชูุณุนู ูุณุชู (Priority: High)
- [x] ูพุงุฏูโุณุงุฒ ุณุณุชู ูุณุฑุงุจ ููููุง
- [x] ูพุงุฏูโุณุงุฒ ุณุณุชู ูุฏุฑุช ุฏุณุชูโุจูุฏโูุง
- [x] ูพุงุฏูโุณุงุฒ ุณุณุชู ุขูพููุฏ ู ุฐุฎุฑู ูุงูโูุง
- [x] ูพุงุฏูโุณุงุฒ ุณุณุชู ุฌุณุชุฌู ุจุฑุง ฺฉุงุฑุจุฑุงู
- [x] ูพุงุฏูโุณุงุฒ ุณุณุชู ูุฏุฑุช ฺฏุฑููโูุง

### ูุงุฒ 2 - ุจูุจูุฏ ุชุฌุฑุจู ฺฉุงุฑุจุฑ (Priority: Medium)
- [x] **ุงุถุงูู ฺฉุฑุฏู ุณุณุชู pagination ุจุฑุง ูุณุชโูุง:** ุจุฑุง ููุงุด ูุณุชโูุง ุทููุงู (ูุงููุฏ ุฏุณุชูโูุงุ ูุงูโูุง ู ฺฏุฑููโูุง) ุฏุฑ ฺูุฏู ุตูุญูุ ุงุฒ pagination ุงุณุชูุงุฏู ูโุดูุฏ ุชุง ฺฉุงุฑุจุฑ ุจุชูุงูุฏ ุจู ุฑุงุญุช ุจู ุตูุญุงุช ุฌุงุจุฌุง ุดูุฏ.
- [x] **ุงุถุงูู ฺฉุฑุฏู ุฏฺฉููโูุง ุดูุงูุฑ (Floating buttons):** ุฏฺฉููโูุง ููู ู ูพุฑฺฉุงุฑุจุฑุฏ ูุงููุฏ "ุจุงุฒฺฏุดุช ุจู ููู ุงุตู" ุจู ุตูุฑุช ุดูุงูุฑ ุฏุฑ ูพุงู ููููุง ูุฑุงุฑ ูโฺฏุฑูุฏ ุชุง ุฏุณุชุฑุณ ุจู ุขูโูุง ุขุณุงูโุชุฑ ุดูุฏ.
- [x] **ุจูุจูุฏ ูพุงูโูุง ุฎุทุง ู ุจุงุฒุฎูุฑุฏ ุจู ฺฉุงุฑุจุฑ:** ูพุงูโูุง ุฎุทุง ุจุง ุฌุฒุฆุงุช ุจุดุชุฑ ููุงุด ุฏุงุฏู ูโุดููุฏ ู ุฏุฑ ูุฑ ูุฑุญููุ ุจุงุฒุฎูุฑุฏ ููุงุณุจ ุจู ฺฉุงุฑุจุฑ ุงุฑุงุฆู ูโุดูุฏ ุชุง ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ ูุฑุงูู ุดูุฏ.
- [x] **ุงุถุงูู ฺฉุฑุฏู ุณุณุชู ุขูุงุฑ ู ฺฏุฒุงุฑุดโฺฏุฑ:** ุงุฏููโูุง ูโุชูุงููุฏ ุจู ุขูุงุฑูุง ฺฉู ุฑุจุงุช (ูุงููุฏ ุชุนุฏุงุฏ ฺฉุงุฑุจุฑุงูุ ุชุนุฏุงุฏ ูุงูโูุง ู...) ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดูุฏ ู ฺฏุฒุงุฑุดโูุง ุฏูุฑูโุง ุงุฒ ูุนุงูุชโูุง ุฏุฑุงูุช ฺฉููุฏ.

### ูุงุฒ 3 - ููุด ูุตููุน (Priority: Low)
- [x] **ุงุถุงูู ฺฉุฑุฏู ูุงุจูุช ูพุงุณุฎฺฏู ุฎูุฏฺฉุงุฑ ุจุง AI:** ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏฺฉูู "ุงุฒ AI ุจูพุฑุณ" ุณูุงูุงุช ุฎูุฏ ุฑุง ูุทุฑุญ ฺฉุฑุฏู ู ุจุฑ ุงุณุงุณ ูุญุชูุง ููุฌูุฏ ุฏุฑ ุฑุจุงุชุ ูพุงุณุฎ ุฏุฑุงูุช ฺฉููุฏ. ุงู ูุงุจูุช ุงุฒ ูุฏูโูุง ุฒุจุงู ุจุฒุฑฺฏ Cloudflare Workers AI ุงุณุชูุงุฏู ูโฺฉูุฏ.
- [ ] **ุงุถุงูู ฺฉุฑุฏู ุณุณุชู ูพุดููุงุฏ ูุญุชูุง ุจุฑ ุงุณุงุณ ุชุงุฑุฎฺู:** ุฑุจุงุช ุจุง ุชุญูู ุชุงุฑุฎฺู ูุนุงูุช ฺฉุงุฑุจุฑุ ูุญุชูุง ูุฑุชุจุท ู ููุฑุฏ ุนูุงูู ุงู ุฑุง ูพุดููุงุฏ ูโุฏูุฏ.
- [x] **ุงุถุงูู ฺฉุฑุฏู ูุงุจูุช ุฎูุงุตูโุณุงุฒ ูุชูู:** ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุจุง ุงุฑุณุงู ุฏุณุชูุฑ `/summarize` ุฏุฑ ูพุงุณุฎ ุจู ฺฉ ูพุงู ูุชูุ ุฎูุงุตูโุง ุงุฒ ุขู ุฑุง ุฏุฑุงูุช ฺฉููุฏ. ุงู ูฺฺฏ ูุฒ ุชูุณุท ูุฏูโูุง ููุด ูุตููุน Cloudflare ูพุดุชุจุงู ูโุดูุฏ.
- [ ] **ุงุถุงูู ฺฉุฑุฏู ุชุฑุฌูู ุฎูุฏฺฉุงุฑ ูุญุชูุง:** ุงูฺฉุงู ุชุฑุฌูู ูุชูู ุจู ุฒุจุงูโูุง ูุฎุชูู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฏูโูุง ุชุฑุฌูู ููุด ูุตููุน ูุฑุงูู ูโุดูุฏ.

### ูุงุฒ 4 - ุงูฺฉุงูุงุช ูพุดุฑูุชู (Priority: Low)
- [ ] ุงุถุงูู ฺฉุฑุฏู ุณุณุชู ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ุจู ุฑุจุงุชโูุง
- [ ] ุงุถุงูู ฺฉุฑุฏู ุณุณุชู ูุธุฑุณูุฌ ุจุฑุง ูุงูโูุง
- [ ] ุงุถุงูู ฺฉุฑุฏู ูุงุจูุช ุฏุงูููุฏ ุฏุณุชูโุง
- [ ] ุงุถุงูู ฺฉุฑุฏู ุณุณุชู ุงุนูุงู ุจุฑุง ูุญุชูุง ุฌุฏุฏ

## ๐ ุงููุช

- ุงุนุชุจุงุฑุณูุฌ ุชูุงู ูุฑูุฏโูุง
- ูุญุฏูุฏ ฺฉุฑุฏู ุฏุณุชุฑุณ ุงุฏููโูุง ุจู ุนููุงุช ุฎุงุต
- ุงุณุชูุงุฏู ุงุฒ rate limiting ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงุณูพู
- ูุงฺฏโฺฏุฑ ุชูุงู ุนููุงุช ููู

## ๐ ูุงูุชูุฑูฺฏ

- ูุงฺฏโฺฏุฑ ุชูุงู ุฎุทุงูุง
- ุขูุงุฑ ุงุณุชูุงุฏู ุฑูุฒุงูู
- ูุงูุชูุฑูฺฏ ุนููฺฉุฑุฏ API
- ฺฏุฒุงุฑุดโูุง ููุชฺฏ ุจุฑุง ุงุฏููโูุง
